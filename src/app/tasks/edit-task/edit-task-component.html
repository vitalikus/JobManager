
<h3>Editing the task details</h3>
<div class="container">
  <div class="row">

      <form #taskForm="ngForm" (ngSubmit)="onSave()" >
          <button class="btn btn-primary" (click)="onSave(task)" type="button">Save</button>
          <button class="btn btn-primary" (click)="onDelete(task._id)" type="button">Delete</button>
          <button class="btn btn-primary" (click)="onRun(task._id)" type="button">Run</button>
          <button class="btn btn-primary" (click)="onDisabled(task._id)" type="button">Disabled</button>
          <button class="btn btn-primary" (click)="onSubmitToScheduler(task._id)" type="button">Submit to the scheduler</button>
          <br>
        <div class="form-group">
          <label for="TaskName">Task name</label>
          <input 
            type="text"
            id="TaskName"
            class="form-control"
            [(ngModel)]="task.TaskName"             
            name="TaskName"
            placeholder="TaskName"
            required>          
            
            
        </div>        
        <div class="form-group">
            <label for="ScheduledUrl">Service URL</label>
            <input 
              type="text"
              id="ScheduledUrl"
              class="form-control"
              name="ScheduledUrl"
              [(ngModel)]="task.ScheduledUrl"
              required>
          </div>
           <div class="form-group">
              <label for="MaxDuration">Timeout</label>
              <input 
                type="text"
                id="MaxDuration"
                class="form-control"        
                [(ngModel)]="task.MaxDuration"  
                name="MaxDuration"
                value="0">                
          </div>
          <div class="form-group">
              <label for="Cron">Crone expression</label>
              <input 
                type="text"
                id="Cron"
                class="form-control"
                [(ngModel)]="task.Cron"   
                name="Cron"
                required>                
          </div>
  
          <div class="form-group">
              <label for="header">Header</label>
              <select class="form-control" id="header" name="header" required> 
                  <option *ngFor="let header of task.Headers">{{header}} </option>                  
                </select>              
          </div>
          <div class="form-group">
              <label for="Body">Body</label>
              <input type="text"
              class="form-control"
              id="Body" 
              [(ngModel)]="task.Body"  
              name="Body" 
              required>                 
          </div>
          <div class="form-group">
              <label for="ActiveStatus">Status</label>
                {{task.ActiveStatus}}
          </div>  
          <div class="form-group">
              <label for="ConflictTasks">Do not run at the same time as</label>
              <select multiple class="form-control" id="ConflictTasks" ngModel
              name="ConflictTasks" required> 
              <option *ngFor="let conflictTask of task.ConflictTasks">{{conflictTask}} </option>                  
                </select>              
          </div>          
      </form>      
      <div class="container">
          <h2>History</h2>
          <p>Click on the collapsible panel to open and close it.</p>
          <div class="panel-group">
            <div class="panel panel-default">
              <div class="panel-heading">
                <h4 class="panel-title">
                  <a data-toggle="collapse" href="http://localhost:4200/task/{{task._id}}#history1">Collapsible panel</a>
                </h4>
              </div>
              <div id="history1" class="panel-collapse collapse">
                <div class="panel-body">Panel Body
                    <ul> 
                    <li *ngFor="let history of arrayHistory.models">{{history.ResponseStatus}} - {{history.StartDate}} - {{history.Duration}} -  {{history.ResponseBody}}</li>                                                  
                    </ul>
                </div>                
              </div>
            </div>
          </div>
        </div>
</div>